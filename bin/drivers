#!/usr/bin/bash
install_nvidia_opensuse(){
    # main drivers
    sudo zypper -n install --auto-agree-with-licenses openSUSE-repos-Tumbleweed-NVIDIA

    sudo zypper al nvidia-open-driver-G06-signed-kmp-default
    sudo zypper al nvidia-open-driver-G07-signed-kmp-default

    sudo zypper al nvidia-open-driver-G06-signed-kmp-longterm
    sudo zypper al nvidia-open-driver-G07-signed-kmp-longterm

    sudo zypper al nvidia-open-driver-G06-signed-cuda-kmp-default
    sudo zypper al nvidia-open-driver-G07-signed-cuda-kmp-default

    # cuda drivers
    sudo zypper al nvidia-open-driver-G06-signed-cuda-kmp-longterm
    sudo zypper al nvidia-open-driver-G07-signed-cuda-kmp-longterm

    sudo zypper --gpg-auto-import-keys -n ref
    sudo zypper -n install --auto-agree-with-licenses dkms nvidia-settings nvidia-driver-G06-kmp-default \
    nvidia-driver-G06-kmp-longterm nvidia-userspace-meta-G06
}

install_lact_opensuse(){
    sudo zypper -n install dbus-1-daemon
    sudo flatpak install -y flathub io.github.ilya_zlobintsev.LACT

}
if [ "$1" == "lact" ] && [ "$DISTRO" == "opensuse-tumbleweed" ]
then
    install_lact_opensuse
elif [ "$1" == "nvidia" ] && [ "$DISTRO" == "opensuse-tumbleweed" ]
then
    install_nvidia_opensuse
else
    echo "error"
fi